<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<head>
		<title>Page d'accueil</title>
	</head>
	<body>
	<script type="application/javascript" src="../js/jquery.min.js" th:scr="@{/js/jquery.min.js}"></script>
	<link rel="stylesheet" href="../css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}">
	<header th:replace="header/header::header">	</header>
		<div class="welcome">
			<h1>Bienvenue sur watcher !!!</h1>
			<p>Cherchez un film et ajoutez-le dans votre watchlist</p>
		</div>


		<div class="search-container">
		    <form class="example" th:action="@{/search}" th:object="${params}" method="get">
				<input type="text" placeholder="Chercher un film.." name="params">
				<button type="submit"><i class="fa fa-search"></i></button>
				<div id="container-movies">
					<div class="container-movie" th:each="movie: ${movies}">
						<div class="movie">
							<div class="movie-inside front">
								<!-- <img th:src="${movie.getPosterPathUrl()}">movie poster_path -->
							</div>
							<div class="movie-inside back">
								<div class="movie-details">
									<div class="movie-snap"><!-- movie backdrop_path -->
										<!-- <img th:src="${movie.getBackdropPathUrl()}"> -->
									</div>
									<h1 th:text="${movie.original_title}"><br><span th:text="${release_date}"></span></h1>
									<ul>
										<li>Titre d'origine: <span href="#" th:text="${movie.original_title}"></span></li>
										<li>Popularit√©: <span href="#" th:text="${movie.popularity}"></span></li>
										<!--<li>votes: <span href="#" th:text="${movie.vote_count}"></span></li>
										<li>Moyenne de vote: <a href="#" th:text="${movie.vote_average}"></a></li>-->
										<li>Langue: <span href="#" th:text="${movie.original_language}"></span></li>
										<!-- <li>Test1: <span href="#" th:text="${movie.posterFilm}"></span></li> -->
										<!-- <li>Test2: <span href="#" th:text="${movie.getPosterPathUrl()}"></span></li> -->
										<li hidden name="${movie.original_title}"> </li>
									</ul>
									<div class="movie-synopsis" th:text="${movie.overview}"></div>
								</div>
									<div th:switch="${redirect}">
										<button type="button" class="btn btn-primary" style="text-align:center" data-toggle="modal" th:data-val="${movie.id}" data-target="#Modal"  th:case="0" ><i class="fas fa-plus"></i> </button>
										<button type="button" class="btn btn-primary" style="text-align:center" data-toggle="modal"  th:data-val="${movie.id}" data-target="#Modal" th:case="1" ><i class="fas fa-plus"></i> </button>
										<button type="button" class="btn btn-primary" style="text-align:center" onclick="window.location.replace('/connexion')" th:case="2" ><i class="fas fa-plus"></i> </button>

									</div>
									<div>
									</div>
							</div>
						</div>

					</div>
				</div>
			</form>
  		</div>

	<!-- Modal -->
	<div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" th:switch="${redirect}">
					<button type="button" class="btn btn-primary" style="text-align:center" onclick="window.location.replace('/mes_listes')" th:case="0"><i class="fas fa-plus"></i> </button>
					<div th:case="1">
						<form th:action="@{/movie_to_list}" method="post">
						<tr th:each="list: ${lists}">
							<th>
								<button type="submit" class="btn btn-secondary"  th:text="${list.title}"></button>
								<input type="hidden" th:value="${list.getIdList()}" id="listId" name="listId"></input>
								<input type="hidden" id="apiFilmId" name="apiFilmId"></input>

							<th/>

						</tr>
						</form>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
				</div>
			</div>
		</div>
	</div>

	<script>
		$('#Modal').on('show.bs.modal', function (event) {
  			var myVal = $(event.relatedTarget).data('val');
  			$(this).find("#apiFilmId").val(myVal);
		});

	</script>
	</body>

</html>

